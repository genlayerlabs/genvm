# GenVM
It is a monorepo for GenVM, which consists of the following subprojects:
- [executor](./executor/) core GenVM itself: modified [`wasmtime`](https://wasmtime.dev) which exposes genvm-sdk-wasi implementation and does all the sandboxing work
- [sdk-rust](./sdk-rust/): rust bindings for genvm-sdk-wasi, this library is autogenerated from [witx](./executor/src/wasi/witx/genlayer_sdk.witx)
- [runners](./runners/): various "runners" available for contracts to use
    - software floating point implementation
    - python interpreter with built-in `sdk-rust`
    - python standard library from genlayer


## Contributing
For contributing documentation see [contributing page](./doc/contributing/README.md)

## Building

Prelude:
- `./tools/ya-build/ya-build config`
  This command scraps and configures all targets (similar to CMake)
- `ninja` is an alternative to `make`, it runs build commands
- Output is located at `build/out` as a "root" (`bin`, `lib`, `share`)

Required tools:
- git
- ruby (3.\*, otherwise it will be installed from a script)
- [...](./build-scripts/src/ubuntu.sh) can be installed via scripts (see below)

### Simple
1. `cd $PROJECT_DIR`
2. `git submodule update --init --recursive --depth 1`
3. `./build-scripts/install/install-deps.rb --os --rust --genvm`
4. `source env.sh`
5. `git third-party update --all`
7. `ya-build config` (for release build pass `--preload .ci/release-conf.rb`)
8. `ninja -C build genvm/executor/all`
9. Get `genvm-runners.zip` from [github](https://github.com/yeagerai/genvm)
10. merge `build/out` and `genvm-runners.zip`

### Full

It will also require `docker` and `docker-buildx`

1. `cd $PROJECT_DIR`
2. `git submodule update --init --recursive --depth 1`
3. `./build-scripts/install/install-deps.rb --os --rust --genvm --runners`
4. `source env.sh`
5. `ya-build config` (for release build pass `--preload .ci/release-conf.rb`)
6. `ninja -C build tags/all`
7. full genvm (including runners) is located at `build/out`
